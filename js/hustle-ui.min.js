/*!
 * WPMU DEV Hustle UI
 * Copyright 2019 Incsub (https://incsub.com)
 * Licensed under GPL v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(t){var e,n=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];function i(t,e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.node=t,this._listeners={},this.create(e)}function s(t){return Array.prototype.slice.call(t)}function o(t,e){return s((e||document).querySelectorAll(t))}function a(t){var e=u(t);e.length&&e[0].focus()}function u(t){return o(n.join(","),t).filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})}i.prototype.create=function(t){var e,n;return this._targets=this._targets||function(t){if(NodeList.prototype.isPrototypeOf(t))return s(t);if(Element.prototype.isPrototypeOf(t))return[t];if("string"==typeof t)return o(t)}(t)||(e=this.node,(n=s(e.parentNode.childNodes).filter(function(t){return 1===t.nodeType})).splice(n.indexOf(e),1),n),this.node.setAttribute("aria-hidden",!0),this.shown=!1,this._openers=o('[data-a11y-dialog-show="'+this.node.id+'"]'),this._openers.forEach(function(t){t.addEventListener("click",this._show)}.bind(this)),this._closers=o("[data-a11y-dialog-hide]",this.node).concat(o('[data-a11y-dialog-hide="'+this.node.id+'"]')),this._closers.forEach(function(t){t.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},i.prototype.show=function(t){var n=this.node.getElementsByClassName("hustle-popup-mask"),i=this.node.getElementsByClassName("hustle-popup-content");return this.shown?this:(i[0].className="hustle-popup-content sui-bounce-in",n[0].className="hustle-popup-mask sui-fade-in",this.shown=!0,this.node.removeAttribute("aria-hidden"),this._targets.forEach(function(t){var e=t.getAttribute("aria-hidden");e&&t.setAttribute("data-a11y-dialog-original",e),t.setAttribute("aria-hidden","true")}),e=document.activeElement,a(this.node),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),document.getElementsByTagName("html")[0].classList.add("hustle-has-overlay"),this._fire("show",t),this)},i.prototype.hide=function(t){var n=this.node.getElementsByClassName("hustle-popup-mask"),i=this.node.getElementsByClassName("hustle-popup-content");if(!this.shown)return this;i[0].className="hustle-popup-content sui-bounce-out",n[0].className="hustle-popup-mask sui-fade-out",this.shown=!1;const s=this.node;return setTimeout(function(){s.setAttribute("aria-hidden","true")},300),this._targets.forEach(function(t){var e=t.getAttribute("data-a11y-dialog-original");e?(t.setAttribute("aria-hidden",e),t.removeAttribute("data-a11y-dialog-original")):t.removeAttribute("aria-hidden")}),e&&e.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),document.getElementsByTagName("html")[0].classList.remove("hustle-has-overlay"),this._fire("hide",t),this},i.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(t){t.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(t){t.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},i.prototype.on=function(t,e){return void 0===this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e),this},i.prototype.off=function(t,e){var n=this._listeners[t].indexOf(e);return-1>n&&this._listeners[t].splice(n,1),this},i.prototype._fire=function(t,e){(this._listeners[t]||[]).forEach(function(t){t(this.node,e)}.bind(this))},i.prototype._bindKeypress=function(t){this.shown&&27===t.which&&(t.preventDefault(),this.hide()),this.shown&&9===t.which&&function(t,e){var n=u(t),i=n.indexOf(document.activeElement);e.shiftKey&&0===i?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||i!==n.length-1||(n[0].focus(),e.preventDefault())}(this.node,t)},i.prototype._maintainFocus=function(t){this.shown&&!this.node.contains(t.target)&&a(this.node)},"undefined"!=typeof module&&void 0!==module.exports?module.exports=i:"function"==typeof define&&define.amd?define("A11yDialog",[],function(){return i}):"object"==typeof t&&(t.A11yDialog=i)}("undefined"!=typeof global?global:window),function(t){"object"!=typeof HUI&&(window.HUI={}),HUI.buttonSubmit=function(e,n){const i=t(e),s=i.closest(".hustle-ui").find(".hustle-optin"),o=s.find(".hustle-success"),a=s.find(".hustle-layout"),u=a.find(".hustle-layout-form"),l=u.find(".hustle-error-message");if(s.is(".hustle-optin"))return o.hide(),l.hide(),i.on("click",function(e){!function(){const t=u.find(".hustle-field"),e=u.find(".hustle-checkbox");t.removeClass("hustle-field-error"),e.removeClass("hustle-field-error"),l.hide()}(),i.addClass("hustle-button-onload"),setTimeout(function(){!function(){const t=u.find(".hustle-gdpr");t.find("input").is(":checked")?t.removeClass("hustle-field-error"):t.addClass("hustle-field-error")}(),u.find(".hustle-input").parent().each(function(){const e=t(this);e.hasClass("hustle-field-required")&&(""===e.find("input").val()?e.addClass("hustle-field-error"):e.removeClass("hustle-field-error"))}),u.find(".hustle-field-error").length?l.show():(a.slideUp(800),setTimeout(function(){o.slideDown()},800)),i.removeClass("hustle-button-onload")},n),e.preventDefault(),e.stopPropagation()}),this},t(".hustle-button-submit").each(function(){const e=t(this);HUI.buttonSubmit(e,1e3)})}(jQuery),function(t){HUI.checkboxGdpr=function(){t(".hustle-ui .hustle-gdpr input").on("change",function(e){const n=t(e.target),i=n.parent();n.is(":checked")?i.removeClass("hustle-field-error"):i.addClass("hustle-field-error")})},HUI.checkboxGdpr()}(jQuery),function(t){HUI.inlineLoad=function(e){const n=t(e),i=n.find(".hustle-inline-content"),s=t(window).height(),o=n.offset().top;if(n.is(".hustle-inline"))return n.removeClass("hustle-show"),function(){const t=n.data("intro");let e="no_animation";""!==t&&(e=t),"no_animation"!==e&&i.addClass("hustle-animate")}(),s>o?a(200):t(window).scroll(function(){t(window).scrollTop()+s>=o&&a(100)}),this;function a(t){n.addClass("hustle-show"),setTimeout(function(){!function(){const t=n.data("intro");let e="no_animation";""!==t&&(e=t),"no_animation"!==e&&i.addClass("hustle-animate-in--"+e)}()},t)}},t(".hustle-inline").each(function(){HUI.inlineLoad(this)})}(jQuery),function(t){HUI.inputFilled=function(){t(".hustle-ui .hustle-input").blur(function(){const e=t(this);""!==e.val()?e.parent().addClass("hustle-field-filled"):e.parent().removeClass("hustle-field-filled")})},HUI.inputFilled()}(jQuery),function(t){HUI.inputRequired=function(){t(".hustle-ui .hustle-input").blur(function(){const e=t(this),n=e.parent();n.hasClass("hustle-field-required")&&(""===e.val()?n.addClass("hustle-field-error"):n.removeClass("hustle-field-error"))})},HUI.inputRequired()}(jQuery),function(t){HUI.popupClose=function(e){const n=t(e),i=n.closest(".hustle-ui"),s=i.find(".hustle-popup-mask"),o=i.find(".hustle-popup-content");if(n.is(".hustle-button-close")&&i.hasClass("hustle-popup"))return n.on("click",function(t){a(),t.preventDefault(),t.stopPropagation()}),1===i.data("overlay-close")&&s.on("click",function(t){a(),t.preventDefault(),t.stopPropagation()}),this;function a(){const t=i.data("outro");let e=1e3,n="no_animation";""!==t&&(n=t),"no_animation"===n&&(e=0),"fadeOut"===n&&(e=305),"newspaperOut"===n&&(e=505),"bounceOut"===n&&(e=755),function(){const t=i.data("outro");let e="no_animation";""!==t&&(e=t),"no_animation"!==e&&o.addClass("hustle-animate-out--"+e)}(),function(){const t=i.data("intro");let e="no_animation";""!==t&&(e=t),"no_animation"!==e&&o.removeClass("hustle-animate-in--"+e)}(),setTimeout(function(){i.removeClass("hustle-show"),o.removeClass("hustle-animate-out--"+n)},e)}},t(".hustle-button-close").each(function(){const e=t(this);HUI.popupClose(e)})}(jQuery),function(t){HUI.popupLoad=function(e,n){const i=t(e),s=i.find(".hustle-popup-content"),o=n,a=n+200;if(i.is(".hustle-popup"))return i.removeClass("hustle-show"),function(){const t=i.data("intro"),e=i.data("outro");let n="no_animation",o="no_animation";""!==t&&(n=t),""!==e&&(o=e),"no_animation"===n&&"no_animation"===o||s.addClass("hustle-animate"),s.hasClass("hustle-animate")&&"no_animation"===n&&(s.hide(),s.css({opacity:1}))}(),setTimeout(function(){i.addClass("hustle-show")},o),setTimeout(function(){!function(){const t=i.data("intro");let e="no_animation";""!==t&&(e=t),"no_animation"!==e?s.addClass("hustle-animate-in--"+e):s.hasClass("hustle-animate")&&s.show()}()},a),this},t(".hustle-popup").each(function(){const e=t(this),n=t(this).data("delay");HUI.popupLoad(e,n)})}(jQuery),function(t){HUI.slideinClose=function(e){const n=t(e),i=n.closest(".hustle-ui"),s=i.find(".hustle-slidein-content");if(n.is(".hustle-button-close")&&i.hasClass("hustle-slidein"))return n.on("click",function(t){s.addClass("hustle-animate-out"),s.removeClass("hustle-animate-in"),setTimeout(function(){i.removeClass("hustle-show"),s.removeClass("hustle-animate-out")},1e3),t.preventDefault()}),this},t(".hustle-button-close").each(function(){const e=t(this);HUI.slideinClose(e)})}(jQuery),function(t){HUI.slideinLoad=function(e,n){const i=t(e),s=i.find(".hustle-slidein-content"),o=n-200,a=n;if(i.is(".hustle-slidein"))return i.removeClass("hustle-show"),function(){const t=i.data("position");let e="",n="";t.charAt(0).includes("n")&&(e="north"),t.charAt(0).includes("s")&&(e="south"),t.charAt(0).includes("e")&&(e="east"),t.charAt(0).includes("w")&&(e="west"),t.charAt(1).includes("n")&&(n="north"),t.charAt(1).includes("s")&&(n="south"),t.charAt(1).includes("e")&&(n="east"),t.charAt(1).includes("w")&&(n="west"),1===t.length?i.addClass("hustle-slidein-position--"+e):i.addClass("hustle-slidein-position--"+e+"-"+n)}(),setTimeout(function(){i.addClass("hustle-show")},o),setTimeout(function(){s.addClass("hustle-animate-in")},a),this},t(".hustle-slidein").each(function(){const e=t(this),n=t(this).data("delay");HUI.slideinLoad(e,n)})}(jQuery);